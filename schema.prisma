// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "mysql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                       String           @id @default(cuid())
  answer                   SecurityAnswer[] @relation("User_answer")
  firstName                String           @default("")
  lastName                 String           @default("")
  email                    String           @unique @default("")
  password                 String
  createdAt                DateTime?        @default(now())
  privilege                String?          @default("normal")
  profileImage_id          String?
  profileImage_filesize    Int?
  profileImage_width       Int?
  profileImage_height      Int?
  profileImage_extension   String?
  stripeCustomerId         String?          @unique
  stripeSubscriptionId     String?
  stripeStatus             String?
  comments                 Comment[]        @relation("Comment_user")
  reactions                UserReaction[]   @relation("UserReaction_user")
  subscriptions            User[]           @relation("User_subscribers")
  subscribers              User[]           @relation("User_subscribers")
  subscriberCount          Int              @default(0)
  from_SecurityAnswer_user SecurityAnswer[] @relation("SecurityAnswer_user")
}

model SecurityQuestion {
  id                           String           @id @default(cuid())
  question                     String           @default("")
  answer                       SecurityAnswer[] @relation("SecurityQuestion_answer")
  createdAt                    DateTime?        @default(now())
  updatedAt                    DateTime?        @updatedAt
  from_SecurityAnswer_question SecurityAnswer[] @relation("SecurityAnswer_question")
}

model SecurityAnswer {
  id                           String             @id @default(cuid())
  answer                       String             @default("")
  question                     SecurityQuestion?  @relation("SecurityAnswer_question", fields: [questionId], references: [id])
  questionId                   String?            @map("question")
  user                         User?              @relation("SecurityAnswer_user", fields: [userId], references: [id])
  userId                       String?            @map("user")
  createdAt                    DateTime?          @default(now())
  updatedAt                    DateTime?          @updatedAt
  from_User_answer             User[]             @relation("User_answer")
  from_SecurityQuestion_answer SecurityQuestion[] @relation("SecurityQuestion_answer")

  @@index([questionId])
  @@index([userId])
}

model Video {
  id                    String         @id @default(cuid())
  comments              Comment[]      @relation("Comment_video")
  reactions             UserReaction[] @relation("UserReaction_video")
  sourceType            String?        @default("youtube")
  youtubeUrl            String?        @mysql.Text
  embedCode             String?        @mysql.Text
  thumbnailUrl          String?        @mysql.Text
  uploadedFile_filesize Int?
  uploadedFile_filename String?
  title                 String         @unique @default("")
  description           String?        @mysql.Text
  thumbnail_id          String?
  thumbnail_filesize    Int?
  thumbnail_width       Int?
  thumbnail_height      Int?
  thumbnail_extension   String?
  author                String         @default("")
  videoId               String         @default("")
  views                 Int            @default(0)
  duration              String         @default("")
  isNew                 Boolean        @default(false)
  createdAt             DateTime?      @default(now())
  isPublic              Boolean        @default(true)
  featured              Boolean        @default(false)
  highlight             Boolean        @default(false)
  categories            Category[]     @relation("Category_videos")
  isRestricted          Boolean        @default(false)
  verificationMessage   String         @default("")
  publishedAt           DateTime?
}

model Ad {
  id              String   @id @default(cuid())
  title           String   @default("")
  description     String   @default("")
  mode            String?  @default("imageLink")
  image_id        String?
  image_filesize  Int?
  image_width     Int?
  image_height    Int?
  image_extension String?
  link            String   @default("")
  html            String   @default("") @mysql.Text
  location        String?  @default("header")
  top             String   @default("")
  bottom          String   @default("")
  left            String   @default("")
  right           String   @default("")
  dimensions      String?  @default("leaderboard")
  width           String   @default("")
  height          String   @default("")
  status          String?  @default("disable")
  stats           AdStat[] @relation("AdStat_ad")
}

model AdStat {
  id        String   @id @default(cuid())
  eventType String
  timestamp DateTime @default(now())
  ad        Ad?      @relation("AdStat_ad", fields: [adId], references: [id])
  adId      String?  @map("ad")

  @@index([adId])
}

model Category {
  id        String      @id @default(cuid())
  name      String      @unique @default("")
  videos    Video[]     @relation("Category_videos")
  instagram Instagram[] @relation("Category_instagram")
}

model Instagram {
  id          String     @id @default(cuid())
  description String?    @mysql.Text
  url         String     @default("")
  embedCode   String?    @mysql.Text
  isPublic    Boolean    @default(true)
  categories  Category[] @relation("Category_instagram")
  author      String     @default("")
  createdAt   DateTime?  @default(now())
}

model Comment {
  id        String         @id @default(cuid())
  user      User?          @relation("Comment_user", fields: [userId], references: [id])
  userId    String?        @map("user")
  text      String         @default("")
  timestamp DateTime?      @default(now())
  parent    Comment?       @relation("Comment_parent", fields: [parentId], references: [id])
  parentId  String?        @map("parent")
  replies   Comment[]      @relation("Comment_parent")
  video     Video?         @relation("Comment_video", fields: [videoId], references: [id])
  videoId   String?        @map("video")
  reactions UserReaction[] @relation("UserReaction_comment")

  @@index([userId])
  @@index([parentId])
  @@index([videoId])
}

model UserReaction {
  id        String   @id @default(cuid())
  user      User?    @relation("UserReaction_user", fields: [userId], references: [id])
  userId    String?  @map("user")
  reaction  String
  comment   Comment? @relation("UserReaction_comment", fields: [commentId], references: [id])
  commentId String?  @map("comment")
  video     Video?   @relation("UserReaction_video", fields: [videoId], references: [id])
  videoId   String?  @map("video")

  @@index([userId])
  @@index([commentId])
  @@index([videoId])
}
